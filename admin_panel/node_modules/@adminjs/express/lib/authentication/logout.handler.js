const getLogoutPath = (admin) => {
    const { logoutPath, rootPath } = admin.options;
    const normalizedLogoutPath = logoutPath.replace(rootPath, "");
    return normalizedLogoutPath.startsWith("/")
        ? normalizedLogoutPath
        : `/${normalizedLogoutPath}`;
};
export const withLogout = (router, admin) => {
    const logoutPath = getLogoutPath(admin);
    router.get(logoutPath, async (request, response) => {
        request.session.destroy(() => {
            response.redirect(admin.options.loginPath);
        });
    });
};
